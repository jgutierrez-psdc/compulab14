<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record
            id='sale_comercial.note_form' model='ir.ui.view'>
            <field name='name'>sale_comercial.note.form</field>
            <field name='model'>sale_comercial.note</field>
            <field name='arch' type='xml'>
                <form>
                    <header>
                        <button name="action_validate" string="CONFIRMAR" type="object" states="sent" class="btn-primary" groups="sale_comercial.sale_comercial_validate_notes_user" />
                        <button name="action_send" string="ENVIAR POR CORREO ELECTRÃ“NICO" type="object" states="draft" class="btn-primary" groups="sale_comercial.sale_comercial_send_notes_user" />
                        <button name="action_cancel" string="CANCELAR" type="object" states="validated,sent" groups="sale_comercial.sale_comercial_cancel_notes_user" />
                        <button name="action_draft" string="CONVERTIR EN BORRADOR" type="object" states="canceled" groups="sale_comercial.sale_comercial_cancel_notes_user" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,sent,validated,canceled" />
                    </header>
                    <sheet>
                        <div>
                            <h1 class="mt0">
                                <field name="number" readonly="1" class="oe_inline"/>
                            </h1>
                        </div>
                        <group name="header_info">
                            <group>
                                <field name='name'/>
                                <field name='date' autocomplete="off"/>
                                <field name='client_id' options="{ 'no_create': True, 'no_open': False }" required="1"/>
                                <field name='sale_id' options="{ 'no_create': True, 'no_open': False }" required="1"/>
                            </group>
                            <group>
                                <field name='contact'/>
                                <field name='contact_mail'/>
                                <field name='contact_tel'/>
                                <field name='user_id_ec' options="{ 'no_create': True, 'no_open': False }" required="1"/>
                                <field name='user_id' options="{ 'no_create': True, 'no_open': False }"/>
                                <field name='user_id_pv' options="{ 'no_create': True, 'no_open': False }" widget="many2many_tags"/>
                            </group>
                        </group>
                        <group name="intro_info">
                            <field name='check_body'/>
                            <field name='body' widget="html"/>
                        </group>
                        <group name="ap_info">
                            <field name='check_body_ap'/>
                            <field name='body_ap' widget="html"/>
                        </group>
                        <group name="rc_info">
                            <field name='check_body_rc'/>
                            <field name='body_rc' widget="html"/>
                        </group>
                        <group name="su_info">
                            <field name='check_body_su'/>
                            <field name='body_su' widget="html"/>
                        </group>
                        <group name="anc_info">
                            <field name='check_body_anc'/>
                            <field name='body_anc' widget="html"/>
                        </group>
                        <group name="tc_info">
                            <field name='check_body_tc'/>
                            <field name='body_tc' widget="html"/>
                        </group>
                        <group name="sg_info">
                            <field name='check_body_sg'/>
                            <field name='body_sg' widget="html"/>
                        </group>
                        <group name="cap_info">
                            <field name='check_body_cap'/>
                            <field name='body_cap' widget="html"/>
                        </group>
                        <group name="extra_info">
                            <field name='check_extra'/>
                            <field name='extra_text'/>
                            <field name='body_extra' widget="html"/>
                        </group>
                        <group name="anexo_info">
                            <field name='check_anexo'/>
                            <field name='body_anexo' widget="html"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <record
            id='sale_comercial.note_tree' model='ir.ui.view'>
            <field name='name'>sale_comercial.note.tree</field>
            <field name='model'>sale_comercial.note</field>
            <field name='arch' type='xml'>
                <tree>
                    <field name="number"/>
                    <field name="name"/>
                    <field name="client_id"/>
                    <field name="sale_id"/>
                    <field name="user_id_ec"/>
                    <field name="write_uid"/>
                    <field name='write_date'/>
                </tree>
            </field>
        </record>
        <record
            id='sale_comercial.note_search' model='ir.ui.view'>
            <field name='name'>sale_comercial.note.search</field>
            <field name='model'>sale_comercial.note</field>
            <field name='arch' type='xml'>
                <search>
                    <field name="number"/>
                    <field name="name"/>
                    <field name="client_id"/>
                    <field name="sale_id"/>
                    <field name="user_id_ec"/>
                    <field name="write_uid"/>
                    <field name='write_date'/>
                </search>
            </field>
        </record>

        <record id="view_sale_comercial_filter" model="ir.ui.view">
            <field name="name">sale.comercial.list.select</field>
            <field name="model">sale_comercial.note</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
                <search string="Propuesta Comercial Filtros">
                    <filter string="Mis Propuestas" domain="[('user_id_ec', '=', uid)]" name="my_sale_comercial_filter"/>
               </search>
            </field>
        </record>

        <record
            id="sale_comercial.note_permissions_form" model="ir.ui.view">
            <field name='name'>sale_comercial.note.permissions.form</field>
            <field name='model'>sale_comercial.note</field>
            <field name='inherit_id' ref="sale_comercial.note_form" />
            <field name='groups_id' eval="[(4,ref('sale_comercial.sale_comercial_user')),]" />
            <field name="arch" type="xml">
                <xpath expr="/form" position="attributes">
                    <attribute name="create">true</attribute>
                    <attribute name="edit">true</attribute>
                    <attribute name="delete">true</attribute>
                </xpath>
            </field>
        </record>
        <record
            id="sale_comercial.note_permissions_tree" model="ir.ui.view">
            <field name='name'>sale_comercial.note.permissions.tree</field>
            <field name='model'>sale_comercial.note</field>
            <field name='inherit_id' ref="sale_comercial.note_tree" />
            <field name='groups_id' eval="[(4,ref('sale_comercial.sale_comercial_user')),]" />
            <field name="arch" type="xml">
                <xpath expr="/tree" position="attributes">
                    <attribute name="create">true</attribute>
                    <attribute name="delete">true</attribute>
                </xpath>
            </field>
        </record>
        <record
            id='sale_comercial.note_window' model='ir.actions.act_window'>
            <field name='name'>Propuesta Comercial</field>
            <field name='res_model'>sale_comercial.note</field>
            <field name='view_mode'>tree,form,search</field>
        </record>
        <menuitem
            id="sale_comercial.root_menu"
            name="Propuesta Comercial"
            groups="sale_comercial_user"
            web_icon="sale_comercial,static/description/icon.png"
            sequence="31" />
        <menuitem
            id='sale_comercial.root_notes_list'
            name='Propuesta Comercial'
            parent='sale_comercial.root_menu'
            sequence="0" />
        <menuitem
            id='sale_comercial.notes_list'
            name='Lista de Propuestas Comerciales'
            parent='sale_comercial.root_notes_list'
            sequence="0"
            action='sale_comercial.note_window' />
    </data>
</odoo>
